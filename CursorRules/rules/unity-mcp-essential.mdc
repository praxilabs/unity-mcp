---
alwaysApply: true
---

# Unity MCP Bridge - Essential Rules

## üö® CRITICAL JSON FORMATS (MANDATORY)

### RegistryItem Format
```json
‚úÖ CORRECT: {"prefabName": "Tools", "childName": "Cube (1)"}
‚ùå WRONG: {prefabName: "Tools"} or {"prefabName": Tools} or {'prefabName': 'Tools'}
```

### Function Parameters
```json
‚úÖ CORRECT: [{"parameterName": "value", "parameterValue": true, "parameterType": "System.Boolean"}]
‚ùå WRONG: [{parameterName: "value"}] or [{"parameterName": value}]
```

## üéØ DECISION TREE

### Need to show/hide objects?
‚Üí **GameObjectSetActiveStep** (NOT FunctionCallStep)
- `_newToolName`: {"prefabName": "Parent", "childName": "Child"}
- `_isActive`: true/false

### Need user interaction in any order?
‚Üí **CompositeStep pattern**
- Routes ‚Üí Actions ‚Üí Routes back to entry ‚Üí Exit

### Need sequential execution?
‚Üí **Chain: Node1.exit ‚Üí Node2.entry**

### Need function calls?
‚Üí **FunctionCallStep**
- `_calledObjectName`: RegistryItem
- `selectedComponent`: "ComponentName"
- `selectedFunction`: "MethodName"

## üìã BEFORE EVERY ACTION CHECKLIST

- [ ] JSON: Double quotes around keys AND values
- [ ] RegistryItem: Verify parent/child exist in registry
- [ ] ScriptableObject: Use exact class name from codebase
- [ ] Connections: Parallel = CompositeStep, Sequential = direct
- [ ] Parameters: Test all are set correctly

## üîß QUICK REFERENCE

| Need | Use | Key Parameters |
|------|-----|----------------|
| Show/Hide | GameObjectSetActiveStep | `_newToolName`, `_isActive` |
| User Clicks | ClickStep | `_targetName` |
| Function Calls | FunctionCallStep | `_calledObjectName`, `selectedComponent`, `selectedFunction` |
| Delays | DelayStep | `timeToWait` |
| Parallel | CompositeStep | Routes back to entry |
| Messages | SideMessageStep | `messageID` |

## üìê NODE POSITIONING

### Spacing Rules
- **Horizontal**: 400 units between sequential nodes
- **Vertical**: 300 units between parallel routes
- **Start**: (100, 100) for first node

### Connection Patterns
```
Sequential: Node1.exit ‚Üí Node2.entry ‚Üí Node3.entry
Parallel: CompositeStep.routes ‚Üí [Node1, Node2, Node3] ‚Üí CompositeStep.entry
```

## ‚ùå COMMON ERRORS TO AVOID

1. **Wrong JSON Format**: Always use double quotes around keys and values
2. **Wrong ScriptableObject Names**: Always verify in codebase first
3. **Missing CompositeStep Routes**: Routes must connect back to entry
4. **Wrong Step Node Type**: Use GameObjectSetActiveStep for visibility, not FunctionCallStep

---

**Remember**: When in doubt, always verify in the codebase first!
# Unity MCP Bridge - Essential Rules

## üö® CRITICAL JSON FORMATS (MANDATORY)

### RegistryItem Format
```json
‚úÖ CORRECT: {"prefabName": "Tools", "childName": "Cube (1)"}
‚ùå WRONG: {prefabName: "Tools"} or {"prefabName": Tools} or {'prefabName': 'Tools'}
```

### Function Parameters
```json
‚úÖ CORRECT: [{"parameterName": "value", "parameterValue": true, "parameterType": "System.Boolean"}]
‚ùå WRONG: [{parameterName: "value"}] or [{"parameterName": value}]
```

## üéØ DECISION TREE

### Need to show/hide objects?
‚Üí **GameObjectSetActiveStep** (NOT FunctionCallStep)
- `_newToolName`: {"prefabName": "Parent", "childName": "Child"}
- `_isActive`: true/false

### Need user interaction in any order?
‚Üí **CompositeStep pattern**
- Routes ‚Üí Actions ‚Üí Routes back to entry ‚Üí Exit

### Need sequential execution?
‚Üí **Chain: Node1.exit ‚Üí Node2.entry**

### Need function calls?
‚Üí **FunctionCallStep**
- `_calledObjectName`: RegistryItem
- `selectedComponent`: "ComponentName"
- `selectedFunction`: "MethodName"

## üìã BEFORE EVERY ACTION CHECKLIST

- [ ] JSON: Double quotes around keys AND values
- [ ] RegistryItem: Verify parent/child exist in registry
- [ ] ScriptableObject: Use exact class name from codebase
- [ ] Connections: Parallel = CompositeStep, Sequential = direct
- [ ] Parameters: Test all are set correctly

## üîß QUICK REFERENCE

| Need | Use | Key Parameters |
|------|-----|----------------|
| Show/Hide | GameObjectSetActiveStep | `_newToolName`, `_isActive` |
| User Clicks | ClickStep | `_targetName` |
| Function Calls | FunctionCallStep | `_calledObjectName`, `selectedComponent`, `selectedFunction` |
| Delays | DelayStep | `timeToWait` |
| Parallel | CompositeStep | Routes back to entry |
| Messages | SideMessageStep | `messageID` |

## üìê NODE POSITIONING

### Spacing Rules
- **Horizontal**: 400 units between sequential nodes
- **Vertical**: 300 units between parallel routes
- **Start**: (100, 100) for first node

### Connection Patterns
```
Sequential: Node1.exit ‚Üí Node2.entry ‚Üí Node3.entry
Parallel: CompositeStep.routes ‚Üí [Node1, Node2, Node3] ‚Üí CompositeStep.entry
```

## ‚ùå COMMON ERRORS TO AVOID

1. **Wrong JSON Format**: Always use double quotes around keys and values
2. **Wrong ScriptableObject Names**: Always verify in codebase first
3. **Missing CompositeStep Routes**: Routes must connect back to entry
4. **Wrong Step Node Type**: Use GameObjectSetActiveStep for visibility, not FunctionCallStep

---

**Remember**: When in doubt, always verify in the codebase first!
