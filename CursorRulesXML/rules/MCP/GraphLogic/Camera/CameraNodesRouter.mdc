---
description: Camera positioning, focus control, and view management. Contains FocusOnToolStep, ReturnCameraStep, and camera sequence patterns for guided attention.
alwaysApply: false
---

<rule>
  <meta>
    <title>Camera Nodes</title>
    <description>Camera positioning, focus control, and view management. Contains FocusOnToolStep, ReturnCameraStep, and camera sequence patterns for guided attention.</description>
    <created-at utc-timestamp="1744240920">January 8, 2025, 12:00 PM UTC</created-at>
    <last-updated-at utc-timestamp="1744240920">January 8, 2025, 12:00 PM UTC</last-updated-at>
    <applies-to>
      <file-matcher glob="">All files that this rule can attach to</file-matcher>
    </applies-to>
  </meta>
  <requirements>
    <non-negotiable priority="critical">
      <description>This is a ROUTING RULE ONLY - it does not provide functional tools or capabilities. This rule only routes you to the appropriate node rules for detailed implementation. For actual node implementation, refer to the specific node rules: FocusOnToolStep.mdc and ReturnCameraStep.mdc.</description>
    </non-negotiable>
    <requirement priority="critical">
      <description>ANY time you use FocusOnToolStep and later want to use FocusOnToolStep again (same or different tool), you MUST use ReturnCameraStep between them.</description>
      <examples>
        <example title="Focus to Focus Operations">
          <correct-example title="Proper focus sequence with return" conditions="Need to focus on multiple tools" expected-result="Camera properly transitions between focuses" correctness-criteria="Uses ReturnCameraStep between focus operations">FocusOnToolStep(Tool1) → [any nodes] → ReturnCameraStep → FocusOnToolStep(Tool2)</correct-example>
          <incorrect-example title="Missing return between focuses" conditions="Need to focus on multiple tools" expected-result="Camera properly transitions between focuses" incorrectness-criteria="Skips ReturnCameraStep between focus operations">FocusOnToolStep(Tool1) → [any nodes] → FocusOnToolStep(Tool2) // Missing ReturnCameraStep</incorrect-example>
        </example>
      </examples>
    </requirement>
    <requirement priority="critical">
      <description>The camera system tracks only ONE previous camera position (main camera), not a stack. This requires strict management and proper sequencing.</description>
      <examples>
        <example title="Single Position Tracking">
          <correct-example title="Proper single position management" conditions="Managing camera position tracking" expected-result="Camera position properly tracked" correctness-criteria="Follows single position tracking system">FocusOnToolStep(Tool) → [operations] → ReturnCameraStep → FocusOnToolStep(AnotherTool)</correct-example>
          <incorrect-example title="Improper position management" conditions="Managing camera position tracking" expected-result="Camera position properly tracked" incorrectness-criteria="Assumes stack-based tracking">FocusOnToolStep(Tool1) → FocusOnToolStep(Tool2) → FocusOnToolStep(Tool3) // No returns</incorrect-example>
        </example>
      </examples>
    </requirement>
    <requirement priority="high">
      <description>FocusOnToolStep must be paired with ReturnCameraStep for proper camera management. Use appropriate delays for camera movements.</description>
      <examples>
        <example title="Focus and Return Pairing">
          <correct-example title="Proper focus and return pairing" conditions="Need to focus on tool then return" expected-result="Camera properly focused and returned" correctness-criteria="Pairs FocusOnToolStep with ReturnCameraStep">ClickStep(Device) → FocusOnToolStep(Device) → [operations] → ReturnCameraStep</correct-example>
          <incorrect-example title="Missing return after focus" conditions="Need to focus on tool then return" expected-result="Camera properly focused and returned" incorrectness-criteria="Missing ReturnCameraStep after focus">ClickStep(Device) → FocusOnToolStep(Device) → [operations] // Missing ReturnCameraStep</incorrect-example>
        </example>
      </examples>
    </requirement>
    <requirement priority="medium">
      <description>End experiments with ReturnCameraStep for professional polish. Single focus operations can optionally use ReturnCameraStep.</description>
      <examples>
        <example title="Experiment End and Single Focus">
          <correct-example title="Proper experiment ending" conditions="Ending experiment with camera focus" expected-result="Professional camera management" correctness-criteria="Ends with ReturnCameraStep for polish">FocusOnToolStep(Tool) → [operations] → ReturnCameraStep // End of experiment</correct-example>
          <incorrect-example title="Missing final return" conditions="Ending experiment with camera focus" expected-result="Professional camera management" incorrectness-criteria="Ends without ReturnCameraStep">FocusOnToolStep(Tool) → [operations] // Missing final ReturnCameraStep</incorrect-example>
        </example>
      </examples>
    </requirement>
  </requirements>
  <context description="Additional considerations for camera operations">
    Camera nodes control camera positioning and focus in virtual lab experiments. Essential for guided attention, close-up views, and view management. The system architecture tracks only one previous camera position, requiring strict management of focus and return operations.
  </context>
  <references>
    <reference as="dependency" href=".cursor/rules/rule.mdc" reason="Follows standard rule format">Base rule format definition</reference>
    <reference as="context" href=".cursor/rules/MCP/GraphLogic/Camera/FocusOnToolStep.mdc" reason="Focus operations">Detailed focus operation patterns</reference>
    <reference as="context" href=".cursor/rules/MCP/GraphLogic/Camera/ReturnCameraStep.mdc" reason="Return operations">Detailed return operation patterns</reference>
  </references>
</rule>
